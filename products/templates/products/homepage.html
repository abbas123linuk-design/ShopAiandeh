{% extends 'base.html' %}
{% load humanize %}

{% block title %}ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ - ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡{% endblock %}

{% block extra_head %}
<style>
    /* ========== HERO SLIDER (RESPONSIVE) ========== */
    .hero-slider-container {
        width: 100%; max-width: 1400px; margin: 20px auto 60px;
        position: relative; border-radius: var(--radius); overflow: hidden;
        /* Ø¯Ø³Ú©ØªØ§Ù¾: Ù†Ø³Ø¨Øª 2.5 Ø¨Ù‡ 1 */
        height: 500px; 
        background-color: #f0f0f0;
    }
    .slider-wrapper { position: relative; width: 100%; height: 100%; }
    .slide {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        opacity: 0; visibility: hidden; transition: opacity 0.8s, visibility 0.8s;
        z-index: 1; display: flex; align-items: center; justify-content: center;
        text-align: center; color: white; text-decoration: none;
    }
    .slide.active-slide { opacity: 1; visibility: visible; z-index: 2; }
    .slide img { width: 100%; height: 100%; object-fit: cover; position: absolute; z-index: 1; }
    .slide::after {
        content: ''; position: absolute; inset: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.1) 100%); z-index: 2;
    }
    .slide-content { position: relative; z-index: 3; padding: 20px; }
    .slide-content h2 { font-size: 3.5rem; margin: 0 0 10px; font-weight: 900; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
    .slide-content p { font-size: 1.4rem; opacity: 0.9; }

    /* ========== FEATURES SECTION ========== */
    .features-section {
        display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px; margin-bottom: 60px;
    }
    .feature-box {
        background: white; padding: 25px; border-radius: var(--radius); text-align: center;
        box-shadow: var(--shadow-sm); border: 1px solid #f0f0f0;
    }
    .feature-icon { font-size: 2rem; margin-bottom: 10px; display: block; }
    .feature-title { font-weight: 700; color: var(--dark); display: block; margin-bottom: 5px; }
    .feature-desc { color: var(--gray); font-size: 0.85rem; }

    /* ========== PRODUCT GRID (MODERN) ========== */
    .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .section-header h2 { font-size: 1.8rem; font-weight: 800; color: var(--dark); margin: 0; }
    .view-all { color: var(--primary); font-weight: 600; font-size: 0.9rem; }

    .product-grid {
        display: grid;
        /* Ù…ÙˆØ¨Ø§ÛŒÙ„: 1 Ø³ØªÙˆÙ†ØŒ ØªØ¨Ù„Øª: 2 ÛŒØ§ 3ØŒ Ø¯Ø³Ú©ØªØ§Ù¾: 4 */
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 30px;
    }

    .product-card {
        background: white; border-radius: var(--radius); overflow: hidden;
        border: 1px solid #f3f4f6; transition: all 0.3s ease;
        display: flex; flex-direction: column; position: relative;
    }
    .product-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-md);
        border-color: #e5e7eb;
    }
    .product-image-container {
        width: 100%; padding-top: 100%; /* Ù…Ø±Ø¨Ø¹ 1:1 */
        position: relative; background-color: #f9fafb;
    }
    .product-image-container img {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        object-fit: cover; transition: transform 0.5s;
    }
    .product-card:hover .product-image-container img { transform: scale(1.05); }
    
    .product-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
    .product-name {
        font-size: 1rem; font-weight: 700; color: var(--dark);
        margin: 0 0 10px; line-height: 1.4;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
    }
    .product-footer { margin-top: auto; display: flex; justify-content: space-between; align-items: center; }
    .product-price { font-size: 1.1rem; font-weight: 800; color: var(--dark); }
    .currency { font-size: 0.8rem; font-weight: 400; color: var(--gray); margin-right: 3px; }
    
    .btn-icon {
        width: 35px; height: 35px; border-radius: 50%; background: #f3f4f6;
        display: flex; align-items: center; justify-content: center; color: var(--dark);
        transition: 0.2s;
    }
    .product-card:hover .btn-icon { background: var(--primary); color: white; }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
        .hero-slider-container { height: 300px; margin-top: 10px; } /* Ø§Ø±ØªÙØ§Ø¹ Ú©Ù…ØªØ± Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        .slide-content h2 { font-size: 1.8rem; }
        .slide-content p { font-size: 1rem; }
        .product-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; } /* Ø¯Ùˆ Ø³ØªÙˆÙ† Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        .product-card { border-radius: 8px; }
        .product-info { padding: 12px; }
        .product-name { font-size: 0.9rem; }
        .product-price { font-size: 1rem; }
    }
    @media (max-width: 480px) {
        .hero-slider-container { height: 220px; }
        .product-grid { grid-template-columns: 1fr; } /* ØªÚ© Ø³ØªÙˆÙ† Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø®ÛŒÙ„ÛŒ Ú©ÙˆÚ†Ú© */
    }
</style>
{% endblock %}

{% block content %}
<!-- Ø¨Ø®Ø´ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± -->
{% if active_banners %}
<div class="hero-slider-container">
    <div class="slider-wrapper">
        {% for banner in active_banners %}
            <a href="{{ banner.link|default:'#' }}" class="slide {% if forloop.first %}active-slide{% endif %}">
                <img src="{{ banner.image.url }}" alt="{{ banner.title }}">
                <div class="slide-content">
                    <h2>{{ banner.title }}</h2>
                    {% if banner.subtitle %}<p>{{ banner.subtitle }}</p>{% endif %}
                </div>
            </a>
        {% endfor %}
    </div>
</div>
{% endif %}

<div class="container">
    <!-- ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
    <div class="features-section">
        <div class="feature-box">
            <span class="feature-icon">ğŸš€</span>
            <span class="feature-title">Ø§Ø±Ø³Ø§Ù„ Ø³Ø±ÛŒØ¹</span>
            <span class="feature-desc">ØªØ­ÙˆÛŒÙ„ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ Ø¯Ø±Ø¨ Ù…Ù†Ø²Ù„</span>
        </div>
        <div class="feature-box">
            <span class="feature-icon">ğŸ›¡ï¸</span>
            <span class="feature-title">Ø¶Ù…Ø§Ù†Øª Ø§ØµØ§Ù„Øª</span>
            <span class="feature-desc">ØªØ¶Ù…ÛŒÙ† Ú©ÛŒÙÛŒØª ØªÙ…Ø§Ù… Ú©Ø§Ù„Ø§Ù‡Ø§</span>
        </div>
        <div class="feature-box">
            <span class="feature-icon">ğŸ§</span>
            <span class="feature-title">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´/Û·</span>
            <span class="feature-desc">Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø¯Ø± ØªÙ…Ø§Ù… Ø³Ø§Ø¹Ø§Øª</span>
        </div>
        <div class="feature-box">
            <span class="feature-icon">ğŸ’³</span>
            <span class="feature-title">Ù¾Ø±Ø¯Ø§Ø®Øª Ø§Ù…Ù†</span>
            <span class="feature-desc">Ø¯Ø±Ú¯Ø§Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ù…Ø·Ù…Ø¦Ù† Ø¨Ø§Ù†Ú©ÛŒ</span>
        </div>
    </div>

    <!-- Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª -->
    <div class="section-header">
        <h2>Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª</h2>
        <a href="#" class="view-all">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡ &larr;</a>
    </div>

    <div class="product-grid">
        {% for product in products %}
            <a href="{% url 'products:product_detail' pk=product.pk %}" class="product-card">
                <div class="product-image-container">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3 class="product-name">{{ product.name }}</h3>
                    <div class="product-footer">
                        <div class="product-price">
                            {{ product.price|intcomma }}<span class="currency">ØªÙˆÙ…Ø§Ù†</span>
                        </div>
                        <div class="btn-icon">âœ</div>
                    </div>
                </div>
            </a>
        {% empty %}
            <p>Ù‡Ù†ÙˆØ² Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± (Fade)
    document.addEventListener('DOMContentLoaded', function() {
        const slides = document.querySelectorAll('.slide');
        if (slides.length <= 1) return;
        let index = 0;
        setInterval(() => {
            slides[index].classList.remove('active-slide');
            index = (index + 1) % slides.length;
            slides[index].classList.add('active-slide');
        }, 5000);
    });
</script>
{% endblock %}
