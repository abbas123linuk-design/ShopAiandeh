{% extends 'users/dashboard_base.html' %}

{% block title %}{{ page_title }}{% endblock %}
{% block page_title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="form-container">
    <h3>๐ ุซุจุช / ูุฑุงุด ุขุฏุฑุณ</h3>
    <form method="POST" id="addressForm">
        {% csrf_token %}

        <!-- ููุงุด ุฎุทุงูุง -->
        {% if form.errors %}
        <div class="alert-error">
            ูุทูุง ุงุทูุงุนุงุช ูุฑูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
            {{ form.non_field_errors }}
        </div>
        {% endif %}

        <div class="form-grid">
            <!-- ุงูุชุฎุงุจ ุงุณุชุงู (ููู ฺฉุดู) -->
            <div class="form-group">
                <label>ุงุณุชุงู:</label>
                <select id="province_selector" class="form-control" onchange="updateCities()">
                    <option value="">ุงูุชุฎุงุจ ุงุณุชุงู...</option>
                </select>
            </div>

            <!-- ุงูุชุฎุงุจ ุดูุฑ (ููู ฺฉุดู) -->
            <div class="form-group">
                <label>ุดูุฑ:</label>
                <select id="city_selector" class="form-control">
                    <option value="">ุงุจุชุฏุง ุงุณุชุงู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</option>
                </select>
            </div>

            <!-- ุขุฏุฑุณ ุฏูู -->
            <div class="form-group full-width">
                <label>ุขุฏุฑุณ ุฏูู (ุฎุงุจุงูุ ฺฉูฺูุ ูพูุงฺฉุ ูุงุญุฏ):</label>
                <textarea name="address_detail" rows="3" class="form-control"
                    placeholder="ูุซุงู: ุฎุงุจุงู ุขุฒุงุฏุ ฺฉูฺู ููุฑุ ูพูุงฺฉ 10ุ ูุงุญุฏ 2"
                    required>{{ form.address_detail.value|default:'' }}</textarea>
                {% if form.address_detail.errors %}
                <div class="field-error">{{ form.address_detail.errors }}</div>
                {% endif %}
            </div>

            <!-- ฺฉุฏ ูพุณุช -->
            <div class="form-group">
                <label>ฺฉุฏ ูพุณุช (ฑฐ ุฑูู):</label>
                <input type="number" name="postal_code" class="form-control"
                    value="{{ form.postal_code.value|default:'' }}" required>
                {% if form.postal_code.errors %}
                <div class="field-error">{{ form.postal_code.errors }}</div>
                {% endif %}
            </div>
        </div>

        <!-- ููุฏูุง ูุฎู ุจุฑุง ุงุชุตุงู ุจู ุฏุชุงุจุณ ุฌูฺฏู -->
        <!-- ุงููพูุชโูุง ุงุตู ฺฉู ูุฑู ุฌูฺฏู ุงูุชุธุงุฑ ุฏุงุฑุฏ -->
        <input type="hidden" name="province" id="id_province" value="{{ form.province.value|default:'' }}">
        <input type="hidden" name="city" id="id_city" value="{{ form.city.value|default:'' }}">

        <!-- ุฏฺฉูู ุฐุฎุฑู -->
        <button type="submit" class="btn-submit">ุฐุฎุฑู ุขุฏุฑุณ</button>
    </form>
</div>

<style>
    .form-container {
        background: white;
        padding: 30px;
        border-radius: 12px;
        max-width: 800px;
        margin: 0 auto;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }

    .form-container h3 {
        margin-top: 0;
        border-bottom: 1px solid #eee;
        padding-bottom: 15px;
        margin-bottom: 25px;
        color: #333;
    }

    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .full-width {
        grid-column: 1 / -1;
    }

    label {
        font-weight: bold;
        font-size: 0.9rem;
        color: #444;
    }

    /* ุงุณุชุงู ูุฑูุฏโูุง */
    .form-control,
    input[type="text"],
    input[type="number"],
    textarea,
    select {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-family: 'Vazirmatn', inherit;
        font-size: 1rem;
        box-sizing: border-box;
        transition: 0.2s;
        background-color: #fff;
    }

    .form-control:focus {
        border-color: #007bff;
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    .btn-submit {
        background: #2563eb;
        color: white;
        border: none;
        padding: 15px;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
        width: 100%;
        margin-top: 30px;
        font-weight: bold;
        transition: 0.2s;
    }

    .btn-submit:hover {
        background: #1d4ed8;
    }

    .alert-error {
        background: #fee2e2;
        color: #991b1b;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border: 1px solid #fecaca;
    }

    .field-error {
        color: #dc3545;
        font-size: 0.85rem;
        margin-top: 5px;
    }

    @media (max-width: 600px) {
        .form-grid {
            grid-template-columns: 1fr;
        }

        .form-container {
            padding: 20px;
        }
    }
</style>

<script>
    // ุฏุชุงุจุณ ฺฉุงูู ุงุณุชุงูโูุง ู ุดูุฑูุง
    const iranData = {
        "ุขุฐุฑุจุงุฌุงู ุดุฑู": ["ุชุจุฑุฒ", "ูุฑุงุบู", "ูุฑูุฏ", "ูุงูู", "ุงูุฑ", "ุจูุงุจ", "ุณุฑุงุจ", "ุขุฐุฑุดูุฑ", "ูุงุฏโุดูุฑ", "ุนุฌุจโุดุฑ", "ุณุฑุฏุฑูุฏ", "ููฺฉุงู", "ุดุจุณุชุฑ", "ุฎุณุฑูุดุงู", "ุจุณุชุงูโุขุจุงุฏ", "ูุดุชุฑูุฏ", "ฺฉูุจุฑ", "ุฎูุงุฌู", "ุงูุฎฺ", "ุงุณฺฉู", "ุฎุงููู", "ูููุงู", "ุตููุงู", "ฺฏูฺฏุงู", "ุจุฎุดุงุด", "ุณูุช", "ฺฉุดฺฉุณุฑุง", "ฺฉููุงูู", "ุชุฑฺฉูุงูฺุง", "ุฎุงุฑูุงูุง", "ุชฺฉููโุฏุงุด", "ุชุณูุฌ", "ุณูโุฑูุฏ", "ุงูฺ", "ูุฑูโุขุบุงุฌ", "ูุงูุงู", "ุชููุฑูู", "ุดูุฏุขุจุงุฏ", "ุขุจุดโุงุญูุฏ", "ููุงู", "ฺฉูุฒูโฺฉูุงู", "ุดุฑูุฎุงูู", "ุชุฑฺฉ", "ููุฑุงูุฏ", "ูุจุงุฑฺฉโุดูุฑ", "ุฒุฑูู", "ุฏูุฒุฏูุฒุงู", "ุดุฑุจุงู", "ูุฑุฒูุงู", "ูุธุฑฺฉูุฑุฒ", "ุฎูุงุฑูู", "ุฎุฏุงุฌู", "ุณูโฺุดูู", "ุจูุงุจ ุฌุฏุฏ", "ุฌูุงูโููุนู", "ุขูฺฉูุฏ", "ุขฺุงฺ"],
        "ุขุฐุฑุจุงุฌุงู ุบุฑุจ": ["ุงุฑููู", "ุฎู", "ูุงูุฏูุขุจ", "ููุงุจุงุฏ", "ุจูฺฉุงู", "ุณููุงุณ", "ูพุฑุงูุดูุฑ", "ููุฏู", "ุชฺฉุงุจ", "ูุงฺฉู", "ุณุฑุฏุดุช", "ุดุงููโุฏฺ", "ุงุดููู", "ูุฑูโุถุงุกุงูุฏู", "ุดูุท", "ุณูโฺุดูู", "ุฑุจุท", "ูพูุฏุดุช", "ุจุงุฒุฑฺฏุงู", "ฺูุงุฑุจุฑุฌ", "ูุญูุฏุงุฑ", "ูุฑูุฑู", "ุชุงุฒู ุดูุฑ", "ููุดูโุดูุฑ", "ุฏุฒุฌ ุฏุฒ", "ูุญููุฏุขุจุงุฏ", "ูุฑุขุจุงุฏ", "ฺฉูุชููโฺฉูุฑ", "ฺฏุฑุฏฺฉุดุงูู", "ฺฉุดุงูุฑุฒ", "ุงูุงูุบู", "ูุงููุณ", "ููุดฺ", "ูุงุฒฺฉ ุนูุง", "ูุฑฺฏููุฑ", "ุณุฑู", "ุขูุงุฌู", "ุณููุงูู", "ุญุงุฌูุงุฑ", "ุฎููุงู", "ุจุงุฑูู"],
        "ุงุฑุฏุจู": ["ุงุฑุฏุจู", "ูพุงุฑุณโุขุจุงุฏ", "ูุดฺฏูโุดูุฑ", "ุฎูุฎุงู", "ฺฏุฑู", "ุจููโุณูุงุฑ", "ููู", "ุฌุนูุฑุขุจุงุฏ", "ฺฏู", "ุขุจโุจฺฏูู", "ุงุตูุงูุฏูุฒ", "ูุฑ", "ุนูุจุฑุงู", "ูุดุชฺู", "ุณุฑุนู", "ุงุณูุงูโุขุจุงุฏ", "ุชุงุฒู ฺฉูุฏ ุงูฺฏูุช", "ฺฉููุฑ", "ูุงูุฑูุฏ", "ูุฑ", "ูุตุงุจู", "ุฑุถ", "ูุฎุฑุขุจุงุฏ", "ฺฉูุฑุงู", "ูุฑุงุฏูู"],
        "ุงุตููุงู": ["ุงุตููุงู", "ฺฉุงุดุงู", "ุฎููโุดูุฑ", "ูุฌูโุขุจุงุฏ", "ุดุงููโุดูุฑ", "ุฏุงุฑุงุฑุงู", "ุดูุฑุถุง", "ุชุฑุงู", "ูุจุงุฑฺฉู", "ุฒุฑูโุดูุฑ", "ุขุฑุงู ู ุจุฏฺฏู", "ฺฏููพุงฺฏุงู", "ูุฑุฏููโุดูุฑ", "ุฏูุงูุงู", "ฺุงุฏฺฏุงู", "ุฎูุงูุณุงุฑ", "ููุงูุฑุฌุงู", "ูุทูุฒ", "ูุงู", "ุณูุฑู", "ุฎูุฑ", "ุงุฑุฏุณุชุงู", "ุจูุฆู ู ูุงูุฏุดุช"],
        "ุงูุจุฑุฒ": ["ฺฉุฑุฌ", "ูุดุชฺฏุฑุฏ", "ูุธุฑุขุจุงุฏ", "ูุญูุฏุดูุฑ", "ฺฉูุงูโุดูุฑ", "ูุงูุฏุดุช", "ูุดฺฉูโุฏุดุช", "ฺฏุฑูุฏุฑู", "ฺฏูุณุงุฑ", "ุงุดุชูุงุฑุฏ", "ุทุงููุงู"],
        "ุงูุงู": ["ุงูุงู", "ุฏููุฑุงู", "ุงูุงู", "ุขุจุฏุงูุงู", "ุฏุฑูโุดูุฑ", "ููุฑุงู", "ุณุฑุงุจูู", "ุงุฑฺฉูุงุฒ", "ุขุณูุงูโุขุจุงุฏ", "ฺูุงุฑ", "ูพููู", "ุจุฏุฑู", "ุดุจุงุจ", "ุฏูฺฏุดุง", "ููุฑููุฑ", "ุฒุฑูู", "ูููุงุฑ", "ููุณุงู", "ููู", "ุณุฑุงุจโุจุงุบ", "ุตุงูุญโุขุจุงุฏ", "ุจูุงูู", "ุชูุญุฏ"],
        "ุจูุดูุฑ": ["ุจูุดูุฑ", "ุจุฑุงุฒุฌุงู", "ฺฏูุงูู", "ุฎูุฑููุฌ", "ฺฉูฺฏุงู", "ุฏูู", "ุฌู", "ุฏุฑ", "ุนุณููู", "ฺุบุงุฏฺฉ", "ุงูุฑู", "ุจูฺฉ", "ูุฎู ุชู", "ูุญุฏุชู", "ุขุจโูพุฎุด", "ุฎุงุฑฺฉ", "ุฏุงูฺฉ", "ุณุนุฏุขุจุงุฏ", "ุดุจุงูฺฉุงุฑู", "ุณุฑุงู", "ุจูุฏุฑ ุฑฺฏ", "ฺฉุงฺฉ", "ุจุฏุฎูู", "ูุงุฑุณุชุงู", "ุฏููุงุฑ", "ุจุฑุฏุฎูู", "ุขุจุงุฏ", "ุจุงุฏููู", "ุฑุฒ", "ุชูฺฏ ุงุฑู", "ุงูุงู ุญุณู", "ุฏูุฑุงูฺฉ", "ุดูุจู", "ุจูุดฺฉุงู", "ฺฉููู"],
        "ุชูุฑุงู": ["ุชูุฑุงู", "ุงุณูุงูโุดูุฑ", "ฺฏูุณุชุงู", "ูุฏุณ", "ููุงุฑุฏ", "ูุฑุงูู", "ุดูุฑุงุฑ", "ุฑุจุงุทโฺฉุฑู", "ูุฑฺฺฉ", "ูพุงฺฉุฏุดุช", "ูพุฑูุฏ", "ุงูุฏุดู", "ุจุงุบโุณุชุงู", "ุตุงูุญู", "ูุณูโุดูุฑ", "ุตุจุงุดูุฑ", "ฺูุงุฑุฏุงูฺฏู", "ุจูููู", "ูพุฑุฏุณ", "ูุญุฏู", "ุตูุงุฏุดุช", "ูุตุฑุดูุฑ", "ุฑูุฏูู", "ุดุงูุฏุดูุฑ", "ูุฑููโุขุจุงุฏ", "ูุฑุฏูุณู", "ููุงุณุงู", "ุดูุดฺฉ", "ูุดู", "ุฌูุงุฏุขุจุงุฏ", "ุขุจุนู", "ฺฉูุงู", "ุดุฑูโุขุจุงุฏ", "ูุฑูุฏฺฏุงู ุงูุงู ุฎูู"],
        "ฺูุงุฑูุญุงู ู ุจุฎุชุงุฑ": ["ุดูุฑฺฉุฑุฏ", "ุจุฑูุฌู", "ูุฑุฏฺฏุงู", "ูุฑุฎโุดูุฑ", "ูุงุฑุณุงู", "ููุดุฌุงู", "ุฌูููุงู", "ุณุงูุงู", "ูุฑุงุฏูุจู", "ุจู", "ฺฉุงู", "ุณูุฑุดุฌุงู", "ุจูุฏุงุฌ", "ุจุงุจุงุญุฏุฑ", "ุงุฑุฏู", "ูููู", "ูพุฑุฏูุฌุงู", "ุดููุฒุงุฑ", "ฺฏูุฏูุงู", "ฺฏูุฑู", "ฺฏูุฌุงู", "ุทุงูุงูฺฉ", "ูุงุบุงู", "ุณุฑุฏุดุช", "ุณูุฏุฌุงู", "ุณูุฏุฏุดุช", "ุขููู", "ุฏุณุชูุง", "ฺูฺู", "ูุฑุฏูุฌุงู", "ฺฉุงุฌ", "ูุงูฺ", "ูุงูโุฎููู", "ุฏุดุชฺฉ", "ูุงุฑูู", "ฺูฺฏุฑุฏ", "ุณุฑุฎูู", "ุจุงุฒูุช", "ููุฌ", "ุตูุตุงู"],
        "ุฎุฑุงุณุงู ุฌููุจ": ["ุจุฑุฌูุฏ", "ูุงู", "ุทุจุณ", "ูุฑุฏูุณ", "ููุจูุฏุงู", "ุจุดุฑูู", "ุณุฑุงุงู", "ุณุฑุจุดู", "ุงุณูุงูู", "ุญุงุฌโุขุจุงุฏ", "ุฎูุณู", "ุฎุถุฑ ุฏุดุช ุจุงุถ", "ุงุณุฏู", "ุขุณฺฉ", "ููุจููฺฉ", "ุทุจุณ ูุณูุง", "ุณูโููุนู", "ุงุฑุณฺฉ", "ุนุดูโุขุจุงุฏ", "ุขุฑูโุดูุฑ", "ุงุณูุฏู", "ููุฏ", "ุดูุณู", "ุฏููฺฉ", "ููุณุชุงู", "ฺฏุฒฺฉ", "ุฒูุงู"],
        "ุฎุฑุงุณุงู ุฑุถู": ["ูุดูุฏ", "ูุดุงุจูุฑ", "ุณุจุฒูุงุฑ", "ุชุฑุจุช ุญุฏุฑู", "ฺฉุงุดูุฑ", "ููฺุงู", "ุชุฑุจุช ุฌุงู", "ุชุงุจุงุฏ", "ฺูุงุฑุงู", "ุณุฑุฎุณ", "ฺฏูุงุจุงุฏ", "ูุฑูุงู", "ฺฏูุจูุงุฑ", "ุฏุฑฺฏุฒ", "ุฎูุงู", "ุจุฑุฏุณฺฉู", "ุทุฑูุจู", "ูุถโุขุจุงุฏ", "ููุงุจ", "ุดุงูุฏุฒ", "ุฎุฑู", "ุฎููโุขุจุงุฏ", "ุณูฺฏุงู", "ุจุฌุณุชุงู", "ฺฉุงุฑุฒ", "ูุดูุฏ ุฑุฒู", "ุฏููุชโุขุจุงุฏ", "ุฌุบุชุง", "ูุดุชูุงู", "ุจุงุฎุฑุฒ", "ุฑุดุชุฎูุงุฑ", "ุตุงูุญโุขุจุงุฏ", "ูุฑูุงุฏฺฏุฑุฏ", "ฺฏููฺฉุงู", "ุงุญูุฏุขุจุงุฏ ุตููุช", "ฺฉูุงุช", "ุณูุงู", "ุฑุดุชุฎูุงุฑ", "ุงูุงุจุฏ", "ฺฉูุฏุฑ", "ุดุดุชูุฏ", "ุดุงุฏููุฑ", "ุจุฏุฎุช", "ุณูุฏุณูฺฏ", "ุณูุทุงูโุขุจุงุฏ", "ูุฏูฺฏุงู", "ุณฺฉูุฏุฑ", "ูุงุณูโุขุจุงุฏ", "ูููุฏุฑุขุจุงุฏ", "ฺฉุงุฎฺฉ", "ุฑูุดูุงููุฏ", "ุจุงุฑ", "ุณุฏู", "ุฑูุฏุงุจ", "ูุฒุฏุงููุฏ", "ฺุงูพุดูู", "ุดูุฑุฒู", "ุนุดูโุขุจุงุฏ", "ูุทูโุขุจุงุฏ", "ฺฉุฏฺฉู", "ฺฺฉูู", "ููุชโุขุจุงุฏ", "ููุณ", "ุฌูฺฏู", "ุฑูุด", "ุจุงุฌฺฏุฑุงู", "ููฺฉโุขุจุงุฏ"],
        "ุฎุฑุงุณุงู ุดูุงู": ["ุจุฌููุฑุฏ", "ุดุฑูุงู", "ุงุณูุฑุงู", "ุขุดุฎุงูู", "ุฌุงุฌุฑู", "ูุงุฑูุฌ", "ฺฏุฑููู", "ุตูโุขุจุงุฏ", "ุงูุฑ", "ุดููุงู", "ุฏุฑู", "ุฑุงุฒ", "ุฒุงุฑุช", "ุณูุฎูุงุณุช", "ุชุชฺฉุงููู", "ูพุดโููุนู", "ูุงุถ", "ุญุตุงุฑุฌุฑูฺฏุฑ", "ุขูุง"],
        "ุฎูุฒุณุชุงู": ["ุงููุงุฒ", "ุฏุฒููู", "ุขุจุงุฏุงู", "ูุงูุดูุฑ", "ุฎุฑูุดูุฑ", "ุงูุฏูุดฺฉ", "ุงุฐู", "ุดูุดุชุฑ", "ุจูุจูุงู", "ุจูุฏุฑ ุงูุงู ุฎูู", "ุงูุฏู", "ูุณุฌุฏุณููุงู", "ุฑุงููุฑูุฒ", "ุดุงุฏฺฏุงู", "ุณูุณูฺฏุฑุฏ", "ฺูุฑุงู", "ููุฏุฌุงู", "ุดุจุงู", "ุจุงุบโููฺฉ", "ุฑุงูุดุฑ", "ฺฏุชููุฏ", "ุญูุฏู", "ูุงู", "ููุฒู", "ูุณ", "ููุงุซุงู", "ููุชฺฏู", "ุดุฑุงูุช", "ุฏุฒุขุจ", "ููุนูโุชู", "ุตูโุขุจุงุฏ", "ุดุงููุฑ", "ูุงูุฑูุฏ", "ุงุฑููุฏฺฉูุงุฑ", "ุดูุณโุขุจุงุฏ", "ุขุจฺุฏุงู", "ฺุบุงูุด", "ูุดุฑุงฺฏู", "ุญุณูู", "ุตุงูุญ ุดูุฑ", "ุชุฑฺฉุงูฺฉ", "ุจุณุชุงู", "ฺูุจุฏู", "ุงููุงู", "ุณุงูโููุตูุฑ", "ุฏูุฏุฒ", "ุฌูุชโูฺฉุงู", "ุญูุฒู", "ุจูุฏุฑุฌุงุฒุงู", "ุตุฏูู", "ุณุฑุฏุงุฑุงู", "ุขุฒุงุฏ", "ูููุดูุฑ", "ุจุฏุฑูุจู", "ูุฏุงูุฏ", "ุชุดุงู", "ุงุจูุญูุธู", "ุณูุงูู", "ฺฏูุฑู", "ุฒูุฑู", "ูุดุฑุงฺฏู", "ุฎูุงูุฑู", "ฺู ฺฏูฺฉ", "ฺูู"],
        "ุฒูุฌุงู": ["ุฒูุฌุงู", "ุงุจูุฑ", "ุฎุฑูุฏุฑู", "ูุฏุงุฑ", "ูุฏุฌ", "ุตุงุฆูโููุนู", "ุณูุทุงูู", "ุณุฌุงุณ", "ูุงู ูุดุงู", "ุณูุฑูุฑุฏ", "ฺฏุฑูุงุจ", "ุขุจโุจุฑ", "ุฒุฑูโุฑูุฏ", "ููุฑุจูุงุฑ", "ฺฉุฑุณู", "ุฏูุฏ", "ุฒุฑูโุขุจุงุฏ", "ุงุฑูุบุงูุฎุงูู", "ฺูุฑุฒู", "ุญูุจ", "ูฺฉโูพ"],
        "ุณููุงู": ["ุณููุงู", "ุดุงูุฑูุฏ", "ุฏุงูุบุงู", "ฺฏุฑูุณุง", "ููุฏโุดูุฑ", "ุงูุงูฺฉ", "ุดููุฑุฒุงุฏ", "ุณุฑุฎู", "ุจุณุทุงู", "ุขุฑุงุฏุงู", "ูุฌู", "ุฏุฑุฌุฒู", "ฺฉูุงุชูโุฎุฌ", "ุฏุจุงุฌ", "ูุงู", "ุจุงุฑุฌููุฏ", "ุงูุฑู", "ฺฉููโุขุจุงุฏ"],
        "ุณุณุชุงู ู ุจููฺุณุชุงู": ["ุฒุงูุฏุงู", "ุฒุงุจู", "ุงุฑุงูุดูุฑ", "ฺุงุจูุงุฑ", "ุณุฑุงูุงู", "ุฎุงุด", "ฺฉูุงุฑฺฉ", "ุฌุงูู", "ูฺฉโุดูุฑ", "ูพุดู", "ุณูุฑุงู", "ุฒูฺฉ", "ูููุฌ", "ฺฏูููุฑุช", "ุงุณูพฺฉู", "ุจููพูุฑ", "ุณุฑุจุงุฒ", "ุณุฑฺฉุงู", "ูุญูุฏุขุจุงุฏ", "ุฑุงุณฺฉ", "ูุฑุฌุงูู", "ุฏูุณุชโูุญูุฏ", "ูุตุฑููุฏ", "ูฺฏูุฑ", "ุจูุช", "ุงุฏู", "ูุตุฑุชโุขุจุงุฏ", "ุจุฒูุงู", "ุฒุฑุขุจุงุฏ", "ูุญูุฏ", "ุนูโุงฺฉุจุฑ", "ููฺฉโุขุจุงุฏ", "ูุฏูฺ", "ูุญูุฏุขุจุงุฏ", "ุณูุฏุขุจู"],
        "ูุงุฑุณ": ["ุดุฑุงุฒ", "ูุฑูุฏุดุช", "ุฌูุฑู", "ูุณุง", "ฺฉุงุฒุฑูู", "ุฏุงุฑุงุจ", "ูุงุฑุณุชุงู", "ูุฑูุฒุขุจุงุฏ", "ุขุจุงุฏู", "ูโุฑุฒ", "ุงููุฏ", "ฺฏุฑุงุด", "ุงุณุชูุจุงู", "ฺฉูุงุฑ", "ุฒุฑูุงู", "ูุงูุฑุฏ", "ุฎุฑูโุจุฏ", "ุณุฑูุณุชุงู", "ูุฑุงุดุจูุฏ", "ุฒุฑูโุฏุดุช", "ุฑุณุชู", "ุงุฑุณูุฌุงู", "ุฎูุฌ", "ููุฑ", "ุจุถุง", "ุณูพุฏุงู", "ููุณู", "ูพุงุณุงุฑฺฏุงุฏ", "ุจูุงูุงุช", "ุณุฑฺูุงู", "ุจุฎุชฺฏุงู"],
        "ูุฒูู": ["ูุฒูู", "ุงูููุฏ", "ุชุงฺฉุณุชุงู", "ุจูุฆูโุฒูุฑุง", "ุงูุจุงูู", "ูุญูุฏู", "ูุญููุฏุขุจุงุฏ ููููู", "ุขุจฺฉ", "ุจุฏุณุชุงู", "ุดุฑูู", "ุถุงุกุขุจุงุฏ", "ุฎุฑูุฏุดุช", "ุงุณูุฑูุฑู", "ูุฑุฌู", "ุณฺฏุฒุขุจุงุฏ", "ุดุงู", "ุงุฑุฏุงู", "ุฏุงูุณููุงู", "ุขูุฌ", "ุฎุงฺฉุนู", "ุขุจฺฏุฑู", "ฺฉููู", "ุฑุงุฒูุงู", "ูุนููโฺฉูุงู", "ุณุฑุฏุงู"],
        "ูู": ["ูู", "ูููุงุช", "ุฌุนูุฑู", "ฺฉูฺฉ", "ุฏุณุชุฌุฑุฏ", "ุณููฺฺฏุงู"],
        "ฺฉุฑุฏุณุชุงู": ["ุณููุฏุฌ", "ุณูุฒ", "ูุฑูุงู", "ุจุงูู", "ูุฑูู", "ฺฉุงูุงุฑุงู", "ุจุฌุงุฑ", "ุฏูฺฏูุงู", "ุณุฑุดโุขุจุงุฏ", "ุฏูุจุฑุงู", "ุณุฑูุขุจุงุฏ", "ุงุณูฺฉูุฏ", "ููฺุด", "ุจูุจุงูโุขุจุงุฏ", "ููุฑุงูุงู ุชุฎุช", "ุขุฑูุฑุฏู", "ุฏุฒุฌ", "ุฒุฑูู", "ุจูุฆู ุณูู", "ุชููพโุขุบุงุฌ", "ฺฉุงูโุฏูุงุฑ", "ุจุงุจุงุฑุดุงู", "ุดูุดู", "ฺฉุงูโุณูุฑ", "ูพุฑุชุงุฌ", "ุจุฑุฏูโุฑุดู", "ุณูุชู", "ฺูุงุฑู"],
        "ฺฉุฑูุงู": ["ฺฉุฑูุงู", "ุณุฑุฌุงู", "ุฑูุณูุฌุงู", "ุฌุฑูุช", "ุจู", "ุฒุฑูุฏ", "ฺฉูููุฌ", "ุดูุฑุจุงุจฺฉ", "ุจุงูุช", "ุจุฑุฏุณุฑ", "ุฑุงูุฑ", "ุนูุจุฑุขุจุงุฏ", "ูููุฌุงู", "ุงูุงุฑ", "ููุนูโฺฏูุฌ", "ุฑูุฏุจุงุฑ ุฌููุจ", "ููุฑุฌ", "ุฑุงุจุฑ", "ฺฉููุจูุงู", "ุฑฺฏุงู", "ุงุฑุฒูุฆู", "ูุฑูุงุดุฑ", "ูุงุฑุงุจ"],
        "ฺฉุฑูุงูุดุงู": ["ฺฉุฑูุงูุดุงู", "ุงุณูุงูโุขุจุงุฏ ุบุฑุจ", "ุฌูุงูุฑูุฏ", "ฺฉูฺฏุงูุฑ", "ุณุฑูพู ุฐูุงุจ", "ุณููุฑ", "ูุฑุณู", "ุตุญูู", "ูพุงูู", "ุฑูุงูุณุฑ", "ฺฏูุงูุบุฑุจ", "ูุตุฑุดุฑู", "ุชุงุฒู ุขุจุงุฏ", "ฺฉุฑูุฏ ุบุฑุจ", "ุจุณุชูู", "ฺฏฺฏููุงุฑู", "ฺฉูุฒุฑุงู", "ุฑุฌุงุจ", "ููุฏุดู", "ุดุงูู", "ุจุงููโูุฑู", "ุณุฑูุณุช", "ฺฏูุฏู", "ููุณูุฏ", "ุจุงูฺฏุงู", "ุงุฒฺฏูู", "ูุงูโุฑุงูุงู", "ุณุทุฑ", "ุญูู"],
        "ฺฉูฺฏููู ู ุจูุฑุงุญูุฏ": ["ุงุณูุฌ", "ุฏูฺฏูุจุฏุงู", "ุฏูุฏุดุช", "ูฺฉฺฉ", "ฺุฑุงู", "ููุฏู", "ุจุงุดุช", "ุณโุณุฎุช", "ุณูู", "ุฏุดููฺฉ", "ููุนู ุฑุฆุณ", "ูุงุฑฺฏูู", "ูพุงุชุงูู", "ุณุฑูุงุฑุงุจ", "ฺุชุงุจ", "ฺฏุฑุงุจ ุณูู"],
        "ฺฏูุณุชุงู": ["ฺฏุฑฺฏุงู", "ฺฏูุจุฏ ฺฉุงููุณ", "ุนูโุขุจุงุฏ ฺฉุชูู", "ุจูุฏุฑ ุชุฑฺฉูู", "ุขุฒุงุฏุดูุฑ", "ุขูโููุง", "ฺฉูุงูู", "ฺฉุฑุฏฺฉู", "ูููุฏุดุช", "ูุงุถูโุขุจุงุฏ", "ฺฏูุดโุชูพู", "ุจูุฏุฑ ฺฏุฒ", "ุณููโุดูุฑ", "ุฑุงูุงู", "ุฎุงูโุจุจู", "ูุฑุงููโุชูพู", "ุฏููุฏ", "ูฺฏูโุดูุฑ", "ุณุฑุฎูฺฉูุงุชู", "ุฌูู", "ุงูุจุงุฑุขููู", "ููฺฉูุฏู", "ูุฑุงุบ", "ุชุงุชุงุฑ ุนูุง", "ุณูฺฏุฏูู", "ูุฒุฑุนู", "ููุฏู ุฎุงูุฏูุฒ", "ุงูฺูโุจุฑูู"],
        "ฺฏูุงู": ["ุฑุดุช", "ุจูุฏุฑ ุงูุฒู", "ูุงูุฌุงู", "ููฺฏุฑูุฏ", "ูุดุชูพุฑ", "ุขุณุชุงุฑุง", "ุตููุนูโุณุฑุง", "ุขุณุชุงูู ุงุดุฑูู", "ุฑูุฏุณุฑ", "ูููู", "ุฎูุงู", "ุณุงูฺฉู", "ุฑุถูุงูุดูุฑ", "ูุงุณุงู", "ููุฌู", "ุงููุด", "ฺฉุขุดูุฑ", "ุฑุณุชูโุขุจุงุฏ", "ููุดุงู", "ุณูฺฏุฑ", "ฺฉูุงฺุง", "ุงุณุงูู", "ูุดุช ูุดุง", "ฺฉูฺุตููุงู", "ุฑุญูโุขุจุงุฏ", "ุฎูุดุงุจุฑ", "ุฑูุฏุจุงุฑ", "ฺุงู ู ฺูุฎุงูู", "ฺูุจุฑ", "ุดูุช", "ูพุฑูโุณุฑ", "ููููุงู", "ุฎุดฺฉุจุฌุงุฑ", "ูุฑุฌูู", "ฺฉูููู", "ุดุงูุฏุฑูู", "ฺูฺฉุงู", "ุจุงุฒุงุฑุฌูุนู", "ุญูู", "ูุงุฌุงุฑฺฏุงู", "ฺฏูุฑุงุจ ุฒุฑูุฎ", "ูุณุงุฑ", "ุฑูุฏุจูู", "ุฑุงูฺฉูู", "ุงุญูุฏุณุฑฺฏูุฑุงุจ", "ุงุชุงููุฑ", "ุฏููุงู", "ูุงฺฉููุงู", "ุจุฑูโุณุฑ", "ุชูุชฺฉุงุจู", "ุฌุฑูุฏู", "ูุงุณุงู", "ูุงุณููู"],
        "ูุฑุณุชุงู": ["ุฎุฑูโุขุจุงุฏ", "ุจุฑูุฌุฑุฏ", "ุฏูุฑูุฏ", "ฺฉููุฏุดุช", "ุงูฺฏูุฏุฑุฒ", "ููุฑุขุจุงุฏ", "ุงุฒูุง", "ุงูุดุชุฑ", "ูพูุฏุฎุชุฑ", "ฺฉููุงู", "ูุนูููุงู", "ฺูุงุจู", "ุงุดุชุฑูุงู", "ูุฑูุฒุขุจุงุฏ", "ฺฏุฑุงุจ", "ุณูพุฏุฏุดุช", "ุฒุงุบู", "ฺููโุณูุทุงู", "ุฏุฑุจโฺฏูุจุฏ", "ูุณุงู", "ููููโุขุจุงุฏ", "ุดููโุขุจุงุฏ", "ููุชโฺุดูู", "ุณุฑุงุจโุฏูุฑู", "ุชุชฺฉุงู"],
        "ูุงุฒูุฏุฑุงู": ["ุณุงุฑ", "ุจุงุจู", "ุขูู", "ูุงุฆูโุดูุฑ", "ุจูุดูุฑ", "ฺุงููุณ", "ูฺฉุง", "ุจุงุจูุณุฑ", "ุชูฺฉุงุจู", "ููุดูุฑ", "ูุฑุฏููโฺฉูุงุฑ", "ุฑุงูุณุฑ", "ุฌูุจุงุฑ", "ูุญููุฏุขุจุงุฏ", "ุงูุฑฺฉูุง", "ููุฑ", "ฺฏููฺฏุงู", "ฺฉุชุงูู ู ุณุงุฏุงุชโุดูุฑ", "ุฒุฑุขุจ", "ุนุจุงุณโุขุจุงุฏ", "ุฎููโุดูุฑ", "ุฑุณุชูฺฉูุง", "ุฎุฑูโุขุจุงุฏ", "ุดุฑูุฏ", "ฺูุณุชุงู", "ฺฉูุงุฑุฏุดุช", "ูฺุฑูุฏ", "ุงุฑุทู", "ุณููุงูโุดูุฑ", "ุณูุฑฺฉ", "ุดุฑฺฏุงู", "ูพู ุณูุฏ", "ฺฉุขฺฉูุง", "ุจูููุฑ", "ูุงุฏโุดูุฑ", "ุฑูุงู", "ุงุฒุฏุดูุฑ", "ฺฏุชุงุจ", "ุณุฑุฎุฑูุฏ", "ูุฑุฒูโุขุจุงุฏ", "ูุดุชุงุฑูุฏ", "ฺฉูุงุฑุขุจุงุฏ", "ุขูุงุดุช", "ุฑูู", "ุจูุฏู", "ูพุงูโูููุงุฑ", "ฺฉุฌูุฑ", "ูุฑู", "ุฒุฑฺฏุฑูุญูู", "ุฏุงุจูุฏุดุช", "ูพูู", "ฺฏุฒูฺฉ"],
        "ูุฑฺฉุฒ": ["ุงุฑุงฺฉ", "ุณุงูู", "ุฎูู", "ูุญูุงุช", "ุฏูุฌุงู", "ูุงูููู", "ุดุงุฒูุฏ", "ููุงุฌุฑุงู", "ุชูุฑุด", "ุขุดุชุงู", "ุฎูุฏุงุจ", "ุดุงุฒูุฏ", "ูพุฑูุฏฺฉ", "ุฒุงูู", "ููโูุฑ", "ูุฑููู", "ุขุณุชุงูู", "ฺฉูุฌุงู", "ุฎูุฌู", "ูุฑุงู", "ุชูุฑู", "ุบุฑูโุขุจุงุฏ", "ุฎุดฺฉุฑูุฏ", "ููุงุฌุฑุฏ", "ุณุงุฑูู", "ฺฉุงุฑฺุงู", "ููุฑฺโุจุงุด", "ููุฏูุฏุฑ", "ุขูู", "ุฌุงูุฑุณุงู", "ุฑุงุฒูุงู", "ููุจุฑุงู"],
        "ูุฑูุฒฺฏุงู": ["ุจูุฏุฑุนุจุงุณ", "ููุงุจ", "ุฏูุจุงุฑุฒ", "ุจูุฏุฑ ููฺฏู", "ูุดู", "ฺฉุด", "ุญุงุฌโุขุจุงุฏ", "ุจูุฏุฑ ฺฉูฺฏ", "ุจูุฏุฑ ุฎูุฑ", "ูพุงุฑุณุงู", "ุฌุงุณฺฉ", "ุฏุฑฺฏูุงู", "ุจุณุชฺฉ", "ุจูุฏุฑ ฺุงุฑฺฉ", "ุฑูุฏุฑ", "ุฌูุงุญ", "ุชุงุฒุงู ูพุงู", "ุชุฑูุฑ", "ููุฒุงู", "ูุดุชุจูุฏ", "ุณุฑฺฉ", "ุณูุฒุง", "ูุฑูุฒ", "ุฏุดุช", "ุจฺฉุงู", "ุฒุงุฑุชโุนู", "ฺฏุฑูฺฉ", "ูู", "ฺฉููุณุชฺฉ", "ุจูุฏุฑ ูุนูู", "ฺฏููุฑุงู", "ุณุฑฺฏุฒ", "ุณูุฏุฑฺฉ", "ูุงุฑุบุงู", "ฺฉูุดฺฉูุงุฑ", "ุงุจูููุณ"],
        "ููุฏุงู": ["ููุฏุงู", "ููุงุฑ", "ููุงููุฏ", "ุชูุณุฑฺฉุงู", "ุงุณุฏุขุจุงุฏ", "ฺฉุจูุฏุฑุขููฺฏ", "ุจูุงุฑ", "ูุงูุฌู", "ูุงููู", "ุฑุฒู", "ุตุงูุญโุขุจุงุฏ", "ูุฑุงูุฌ", "ฺฏุงู", "ุฌูุฑูุงู", "ูุฑูู ุฏุฑุฌุฒู", "ุงุฒูุฏุฑุงู", "ูุฑูุฒุงู", "ุณุงูู", "ุณุฑฺฉุงู", "ุฏูู", "ุงุณูุงูโุดูุฑ ุขูโฺฏู", "ุขุฌู", "ุดุฑูโุณู", "ุจุฑุฒูู", "ููุงููุฏ", "ููุงุฌุฑุงู", "ูุฑุณูุฌ", "ฺฏูโุชูพู", "ุฒูฺฏูู", "ุฌูฺฉุงุฑ"],
        "ุฒุฏ": ["ุฒุฏ", "ูุจุฏ", "ุงุฑุฏฺฉุงู", "ุจุงูู", "ููุฑุฒ", "ุงุจุฑฺฉูู", "ุงุดฺฉุฐุฑ", "ุชูุช", "ุดุงูุฏู", "ูุฑุงุช", "ุฒุงุฑฺ", "ูุฑูุณุช", "ุจูุงุจุงุฏ", "ููุฑุฏุดุช", "ุจูุฑูุฆู", "ุงุญูุฏุขุจุงุฏ", "ูุฏูุดู", "ุนูุฏุง", "ูุฑ", "ุฎุถุฑุขุจุงุฏ", "ุฎุงุฑุงูู"]
    };

    const provinceSelect = document.getElementById('province_selector');
    const citySelect = document.getElementById('city_selector');
    const hiddenProvince = document.getElementById('id_province');
    const hiddenCity = document.getElementById('id_city');

    // 1. ูพุฑ ฺฉุฑุฏู ูุณุช ุงุณุชุงูโูุง
    for (const province in iranData) {
        let option = document.createElement('option');
        option.value = province;
        option.textContent = province;
        provinceSelect.appendChild(option);
    }

    // 2. ุงฺฏุฑ ุฏุฑ ุญุงู ูุฑุงุด ูุณุชูุ ููุงุฏุฑ ูุจู ุฑุง ุฏุฑ ุฏุฑุงูพโุฏุงูู ุณุช ฺฉู
    // (ุงู ููุงุฏุฑ ุงุฒ ุทุฑู ุฌูฺฏู ุฏุฑ ุงููพูุชโูุง ูุฎู ุฑูุฏุฑ ุดุฏูโุงูุฏ)
    if (hiddenProvince.value) {
        provinceSelect.value = hiddenProvince.value;
        updateCities(); // ุดูุฑูุง ุฑุง ุจุฑ ุงุณุงุณ ุงุณุชุงู ููุฏ ฺฉู

        if (hiddenCity.value) {
            citySelect.value = hiddenCity.value;
        }
    }

    // 3. ุชุงุจุน ุขูพุฏุช ุดูุฑูุง
    function updateCities() {
        const selectedProvince = provinceSelect.value;

        // ุฎุงู ฺฉุฑุฏู ูุณุช ุดูุฑูุง
        citySelect.innerHTML = '<option value="">ุงูุชุฎุงุจ ุดูุฑ...</option>';

        if (selectedProvince && iranData[selectedProvince]) {
            const cities = iranData[selectedProvince];
            cities.forEach(city => {
                let option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });
        }

        // ุฐุฎุฑู ุงุณุชุงู ุฏุฑ ููุฏ ูุฎู
        hiddenProvince.value = selectedProvince;

        // ุงฺฏุฑ ุงุณุชุงู ุชุบุฑ ฺฉุฑุฏุ ุดูุฑ ูุจู ุจุงุฏ ูพุงฺฉ ุดูุฏ
        if (selectedProvince !== hiddenProvince.defaultValue) {
            hiddenCity.value = '';
        }
    }

    // 4. ุฐุฎุฑู ุดูุฑ ุงูุชุฎุงุจ ุดุฏู ุฏุฑ ููุฏ ูุฎู ุจุฑุง ุงุฑุณุงู ุจู ุณุฑูุฑ
    citySelect.addEventListener('change', function () {
        hiddenCity.value = this.value;
    });

    // 5. ุงุนุชุจุงุฑุณูุฌ ูุจู ุงุฒ ุงุฑุณุงู
    document.getElementById('addressForm').addEventListener('submit', function (e) {
        if (!hiddenProvince.value || !hiddenCity.value) {
            // ุชูุงุด ุจุฑุง ุณุช ฺฉุฑุฏู ูุฌุฏุฏ ุฏุฑ ุตูุฑุช ุฎุทุง
            hiddenProvince.value = provinceSelect.value;
            hiddenCity.value = citySelect.value;

            if (!hiddenProvince.value || !hiddenCity.value) {
                e.preventDefault();
                alert("ูุทูุง ุงุณุชุงู ู ุดูุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.");
            }
        }
    });
</script>
{% endblock %}