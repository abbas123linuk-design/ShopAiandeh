<!-- templates/base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}فروشگاه آینده{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #28a745;
            --danger-color: #dc3545; /* رنگ برای خروج */
            --dark-color: #343a40;
            --light-color: #f8f9fa;
            --font-family: 'Vazirmatn', sans-serif;
        }
        body {
            font-family: var(--font-family);
            background-color: var(--light-color);
            margin: 0;
            padding-top: 80px;
        }
        /* ... (بقیه استایل‌ها که تغییر نکرده‌اند) ... */
        .main-header { background: white; padding: 0 40px; height: 80px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); position: fixed; top: 0; left: 0; right: 0; z-index: 1000; }
        .logo a { font-size: 1.8rem; font-weight: 700; color: var(--dark-color); text-decoration: none; }
        .main-nav ul { list-style: none; margin: 0; padding: 0; display: flex; align-items: center; }
        .main-nav ul li { margin-left: 15px; }
        .main-nav ul li:last-child { margin-left: 0; }
        .btn { padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: 600; transition: all 0.2s; display: inline-block; }
        .btn-primary { background-color: var(--primary-color); color: white; border: none; }
        .btn-primary:hover { background-color: #0056b3; }
        .btn-secondary { border: 2px solid var(--danger-color); color: var(--danger-color); background: none; }
        .btn-secondary:hover { background-color: var(--danger-color); color: white; }
        .btn-success { background-color: var(--secondary-color); color: white; border: none; }
        .btn-success:hover { background-color: #218838; }

        /* استایل برای دکمه‌ای که شبیه لینک است */
        .logout-form button {
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body>
    <header class="main-header">
        <div class="logo">
            <a href="{% url 'homepage' %}">آینده</a>
        </div>
        <nav class="main-nav">
            <ul>
                {% if user.is_authenticated %}
                    <li><a href="{% url 'dashboard' %}" class="btn btn-primary">پنل کاربری</a></li>
                    
                    <!-- ========== تغییر اصلی اینجاست ========== -->
                    <li>
                        <form class="logout-form" method="POST" action="{% url 'logout' %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-secondary">خروج</button>
                        </form>
                    </li>
                    <!-- ========== پایان تغییر ========== -->

                {% else %}
                    <li><a href="{% url 'login' %}" class="btn btn-secondary">ورود</a></li>
                    <li><a href="{% url 'register' %}" class="btn btn-success">ثبت‌نام</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 - فروشگاه آینده. تمام حقوق محفوظ است.</p>
    </footer>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
